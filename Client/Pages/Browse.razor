@page "/browse"
@using BirdEyes.Client.Services.ITADService;

<PageTitle> Browse Games! </PageTitle>

<strong><h3>Browse Games</h3></strong>
<p/><p/>
<AuthorizeView>
	<NotAuthorized>
		<p>Log in to track games! </p>
	</NotAuthorized>
</AuthorizeView>
<EditForm Model="@BrowseInput">
	<div>
		<InputText id="Searchbar" @bind-Value="@BrowseInput.InputtedText" class="form-control" />
	</div>
</EditForm>

<table class="table"> 
	<thead>
		<tr>
			<th>Title</th>
			<th>Shop</th>
			<th>Price</th>
			<th class="dropdown"><button class="dropdown">
				<span class="oi oi-list" area-hidden="true"/>
				<div class="dropdown-content">
						<a href="/browse&sort=Title"<!--add this stuff-->>Title</a>
						<a href="#">Link 2</a>
						<a href="#">Link 3</a>
				</div>

			</button></th>
		</tr>
	</thead>
	<tbody>
			<tr>
			@for (int i = 0; i<allGames.Count(); i++) 
			{
				var game = allGames[i];
				<td><span href="https://isthereanydeal.com/">@game.Title</span></td>

				<td>@game.Shop</td>

				@if (game.Price == 0 | game.Price == null)
				{
					<td style="00FF00">Free</td>
				}
				else
				{
					<td>game.Price</td>
				}
			}

			</tr>
		</tbody> 
</table>



@code {
	private Input BrowseInput = new Input();

	List<Application> allGames = new();
	protected override async Task OnInitializedAsync()
	{
		ITADService serviceInstance = new(new HttpClient());
		allGames.AddRange(await serviceInstance.GetAllGames());
    }

	/*for (int i = 0; i<ITADService.shopGamePairs.Count(); i++)
	{
	
	}*/

	public void DropSortOptions()  {	}
}

